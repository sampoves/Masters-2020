\section{Data and methods}
\subsection{General workflow}
\justify
\begin{itemize}
    \item Kyselytutkimuksen teko
    \item Kyselytutkimuksen toteuttaminen
    \item geoprosessointi ja visualisointien tuotto
    \item Kyselytutkimuksen tulostentutkimus
    \item Tähän upea flowchartti (methodology/data refinement process)
\end{itemize}

\subsection{Study area}
\justify
The study area of this thesis is Helsinki Capital Region. It comprises of municipalities of Helsinki, Espoo, Vantaa and Kauniainen. According to \textcolor{red}{LÄHDE}, the total population of the metropolitan area is 1.495 million. In practice the whole area amalgamates as one complete functional area with borders of the municipalities indistinguishable at the street level. The HCR faces increasing pressure to manage its traffic because \textcolor{red}{LÄHDE}. Of these municipalities Helsinki is the hub, and considered to contain the only inner city features of the municipalities (\textcolor{red}{LÄHDE}). Espoo, Vantaa and Kauniainen are mostly made of suburban areas with occasional industrial areas and large shopping complexes placed throughout the area. The HRC is served with a high performance public transport system comprised of buses and train and tram in Helsinki. Recently the metro expanded from Helsinki to Espoo, triggering a new phase of fast evolving for the surroundings of the new stations.

Despite extensive service level of Helsinki Region public transport, households especially Espoo, Vantaa and Kauniainen remain much dependent on their personal vehicles (\textcolor{red}{LÄHDE}). 

\subsection{TEE TABLE Used data}
\justify

\begin{itemize}
    \item Aineisto Tilastokeskukselta, PAAVO, 167 postinumeroaluetta
    \item YKR gridiin tiedot, Tilastokeskuksen YKR gridin ja DGL:n saavutettavuusaineiston yhteispeli
    \item Urban Atlas 2012
    \item Finnish Environment Institute, urban areas
    \item Helsinki Region Travel Time Matrix 2018, DGL
\end{itemize}

\subsection{TEE TABLE Used software}
\justify

\begin{itemize}
    \item Python 3.7.3, programming language, geoprocessing
    \item R 3.6.1, programming language, data and visualisation
    \item NetBeans, programming platform, asdf
    \item Leaflet 1.4.0, web interface
    \item LAMP Stack
    \item several packages
\end{itemize}

\subsection{Parking survey}
\justify
To collect the areal parking data, the study needed an interactive survey which respondents can use to submit their parking habits in a spatial fashion. To attract a maximum number of submissions, the survey also needs to be of modern design, easy to use and its purpose easy to understand. The type of survey described here is offered as a proprietary web application by a some companies but a no such solution exist which is also free. 

To increase transparency and repeatability, a web application was programmed from ground up. The survey and its supporting infrastructure was installed on a virtual machine in CSC's Taito supercluster. Running on Ubuntu 16.04, the backbone of the survey is a LAMP stack, a software bundle which incorporates the Linux operating system, Apache HTTP Server, MySQL relational database management system and PHP programming language environment. The actual components of the survey are the frontend visible to user, a server side script to verify received data and a database to store user submissions. 

The frontend, a web application, was programmed in JavaScript using its open-source mapping library Leaflet (software version 1.4.0). In the survey the respondent is presented with a map view of Helsinki Capital Region with its 167 postal code areas and is asked to fill out three questions about each area. User is asked to fill out as many postal code areas as they can remember parking in. All answers are estimates as the survey is not about an exact time and place. Once the user is finished with the survey, they may send them to the server side. The user can return to the survey to add data on any postal code areas they missed the last time. In the survey, user fills out the following questions for each postal code area:

\begin{spacing}{1}
    \begin{enumerate}
      \item How long does it usually take for you to park your car and arrive at your destination by foot in this postal code area (in minutes)?
      \item How familiar are you with this postal code area?
      \item What kind of parking spot do you usually take in this postal code area?
      \item fourth question
      \item fifth question
    \end{enumerate}
\end{spacing}

\noindent
When data is received from user, a PHP language script verifies all results. This is an effort to prevent attacks on the web server running the study survey, which is available to the entire internet. Additionally, the verification makes sure falsified or incomplete data does not find its way to the database containing the accepted results. Only certain variables are accepted from the user. All of the variables must be present in the received data. If the verification test fails on any of the variables, user is informed about it. In addition to the verification, a PHP script tracks IP addresses which have accessed the survey.

\gls{ny}, \gls{la} and \gls{un} are abbreviations whereas \gls{angelsperarea}, \gls{numofangels} and \gls{areaofneedle} are part of the nomenclature
\glspl{ny} jeje \gls{ny} test

\begin{table}[!htbp] %% [!htbp] prevents table floating
    \begin{adjustwidth}{-1cm}{-1cm} %% prevents wide table going grossly out of margin, adjust the L and R margins by 1 inch
        \begin{centering}
            \begin{tabular}{|c c c c c c c c c|} 
                \hline
                id & timestamp & ip & zipcode & likert & parkspot & parktime & walktime & timeofday \\ [0.5ex] 
                \hline\hline
                3244 & 2019-06-06 21:39:50 & wro4qo8hv4 & 00510 & 1 & 4 & 0 & 3 & 1\\ [0.25ex]
                \hline
                3245 & 2019-06-06 21:41:21 & aonm72lyx3 & 00520 & 2 & 1 & 10 & 5 & 1 \\ [0.25ex] 
                \hline
                3246 & 2019-06-06 21:41:54 & n1982i4i2v & 00100 & 1 & 1 & 20 & 4 & 1 \\ [0.25ex] 
                \hline
                3247 & 2019-06-06 21:46:19 & sbhfz0uvsl & 00210 & 1 & 1 & 5 & 3 & 3 \\ [0.25ex] 
                \hline
                3248 & 2019-06-06 21:46:22 & sbhfz0uvsl & 00220 & 2 & 2 & 5 & 5 & 2 \\ [1ex]
                \hline
            \end{tabular}
            \caption{Records} \label{tab:recordstab}
        \end{centering}
    \end{adjustwidth}
\end{table}

\begin{table}[!htbp]
    \begin{centering}
        \begin{tabular}{|c c c c c|} 
            \hline
            id & ip & ts\_first & ts\_latest & count \\ [0.5ex] 
            \hline\hline
            1780 & mvovd467a7 & 2019-05-26 15:25:23 & 2019-05-26 15:26:06 & 2 \\ [0.25ex] 
            \hline
            1781 & xgbgkkzxb3 & 2019-05-26 15:26:23 & 2019-05-26 15:26:23 & 1 \\ [0.25ex] 
            \hline
            1782 & c9qer4q99a & 2019-05-26 15:27:25 & 2019-05-26 15:27:25 & 1 \\ [0.25ex]
            \hline
            1783 & cujhd0hng7 & 2019-05-26 15:27:29 & 2019-05-26 15:27:29 & 1 \\ [0.25ex] 
            \hline
            1784 & 3ja7gjtko6 & 2019-05-26 15:28:45 & 2019-05-26 15:29:20 & 2 \\ [1ex]
            \hline
        \end{tabular}
        \caption{Visitors} \label{tab:visitortab}
    \end{centering}
\end{table}

As a final survey component there are two MySQL tables in use. Records contains all the records received from users and visitors contains all unique IP addresses detected by the web server. In records, the following data is gathered: timestamp, IP address, likert, parkspot, parktime. In visitors the following data is gathered: unique IP address, the timestamp of first visit, the timestamp of latest visit, the count of visits.

The source code for this survey and all the information to set up an identical system is available at GitHub (\textcolor{blue}{Insert link here}).

\subsection{Processing survey data}
\justify
Processing user submitted data:
\begin{itemize}
  \item Alueellinen aineisto
  \item Kuinka paljon on tullut aineistoa per postinumeroalue?
  \item Jotain algoritmia alueiden kokoerojen vertailuun?
  \item alueiden maankäytön huomioonotto? (Corine)
  \item Mitä kaikkea Python-tutkimukseen?
\end{itemize}

\subsection{Conducting analyses}
\justify
\begin{itemize}
  \item Compare a few different travel time chains in Helsinki Capital Region. A few starting points and a few finishing points
  \item All of the statistics stuff to detect the variation 
  \item Tuuli was supposed to send me the exact numbers used for parking in Travel Time Matrix, did not do it yet
\end{itemize}